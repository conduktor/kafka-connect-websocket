{"config":{"lang":["en"],"separator":"[\\s\\-,:!=\\[\\]()\"/]+|\\.(?!\\d)|&[lg]t;|(?!\\b)(?=[A-Z][a-z])","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Kafka Connect WebSocket Source Connector","text":"<p>Stream real-time data from any WebSocket endpoint directly into Apache Kafka with automatic reconnection, authentication support, and comprehensive monitoring.</p> <p>Get Started View on GitHub</p>"},{"location":"#features","title":"Features","text":""},{"location":"#real-time-streaming","title":"Real-Time Streaming","text":"<p>Connect to any WebSocket endpoint (ws:// or wss://) and stream data directly into Kafka topics with minimal latency.</p>"},{"location":"#automatic-reconnection","title":"Automatic Reconnection","text":"<p>Built-in reconnection logic with configurable intervals ensures resilient connections even when endpoints are unstable.</p>"},{"location":"#authentication-support","title":"Authentication Support","text":"<p>Bearer token authentication and custom headers for connecting to secured WebSocket APIs.</p>"},{"location":"#subscription-messages","title":"Subscription Messages","text":"<p>Send subscription messages after connection to exchanges like Binance, Coinbase, and custom WebSocket servers.</p>"},{"location":"#built-in-monitoring","title":"Built-in Monitoring","text":"<p>Comprehensive metrics via JMX, detailed logging, and integration with Prometheus/Grafana for production observability.</p>"},{"location":"#material-buffer-message-buffering","title":":material-buffer: Message Buffering","text":"<p>Configurable in-memory queue to handle traffic bursts and optimize throughput to Kafka.</p>"},{"location":"#quick-example","title":"Quick Example","text":"<p>Stream Bitcoin trades from Binance into Kafka:</p> Connector ConfigurationDeploy ConnectorConsume Messages <pre><code>{\n  \"name\": \"binance-btcusdt-connector\",\n  \"config\": {\n    \"connector.class\": \"io.conduktor.connect.websocket.WebSocketSourceConnector\",\n    \"tasks.max\": \"1\",\n    \"websocket.url\": \"wss://stream.binance.com:9443/ws\",\n    \"kafka.topic\": \"binance-btcusdt-trades\",\n    \"websocket.subscription.message\": \"{\\\"method\\\":\\\"SUBSCRIBE\\\",\\\"params\\\":[\\\"btcusdt@trade\\\"],\\\"id\\\":1}\",\n    \"websocket.reconnect.enabled\": \"true\"\n  }\n}\n</code></pre> <pre><code>curl -X POST http://localhost:8083/connectors \\\n  -H \"Content-Type: application/json\" \\\n  -d @binance-connector.json\n</code></pre> <pre><code>kafka-console-consumer.sh \\\n  --bootstrap-server localhost:9092 \\\n  --topic binance-btcusdt-trades \\\n  --from-beginning\n</code></pre>"},{"location":"#use-cases","title":"Use Cases","text":"<p>The connector is ideal for streaming real-time data from:</p> <ul> <li>Cryptocurrency Exchanges - Live trades, order books, and ticker data (Binance, Coinbase, Kraken)</li> <li>IoT Devices - Sensor data and telemetry streams</li> <li>Financial Markets - Stock tickers, forex rates, market data</li> <li>Collaboration Tools - Chat messages, presence updates, notifications</li> <li>Gaming Platforms - Live scores, player updates, game events</li> <li>Custom WebSocket APIs - Any service exposing a WebSocket endpoint</li> </ul>"},{"location":"#architecture","title":"Architecture","text":"<pre><code>graph LR\n    A[WebSocket Endpoint] --&gt;|OkHttp Client| B[Message Queue]\n    B --&gt;|Poll| C[Kafka Connect Task]\n    C --&gt;|Produce| D[Kafka Topic]\n\n    style A fill:#3b82f6\n    style B fill:#f59e0b\n    style C fill:#10b981\n    style D fill:#ef4444</code></pre> <p>The connector uses OkHttp's WebSocket client for reliable connections, maintains an in-memory queue for buffering, and integrates seamlessly with Kafka Connect's task framework.</p>"},{"location":"#why-this-connector","title":"Why This Connector?","text":"Feature Kafka Connect WebSocket Custom Consumer REST Polling Real-time data \u2705 True push model \u2705 True push \u274c Polling delays Kafka integration \u2705 Native \u26a0\ufe0f Manual \u26a0\ufe0f Manual Reconnection logic \u2705 Built-in \u26a0\ufe0f Custom code \u26a0\ufe0f Custom code Monitoring \u2705 JMX/Prometheus \u26a0\ufe0f Custom \u26a0\ufe0f Custom Deployment \u2705 Kafka Connect \u274c Separate service \u274c Separate service Maintenance \u2705 Integrated \u26a0\ufe0f DIY \u26a0\ufe0f DIY"},{"location":"#performance","title":"Performance","text":"<ul> <li>Throughput: Handles 10,000+ messages/second on standard hardware</li> <li>Latency: &lt; 10ms from WebSocket receipt to Kafka produce</li> <li>Reliability: Automatic reconnection with exponential backoff</li> <li>Scalability: Configurable queue size for traffic bursts</li> </ul>"},{"location":"#operational-features","title":"Operational Features","text":"<p>Includes comprehensive operational tooling:</p> <ul> <li>Detailed error handling and structured logging</li> <li>JMX metrics for Prometheus/Grafana integration</li> <li>Automatic reconnection with exponential backoff</li> <li>Configurable message buffering</li> <li>Extensive troubleshooting documentation</li> </ul>"},{"location":"#important-data-delivery-semantics","title":"\u26a0\ufe0f Important: Data Delivery Semantics","text":"<p>At-Most-Once Delivery</p> <p>This connector provides at-most-once delivery semantics due to architectural limitations:</p> <ul> <li>In-memory buffering: Messages in the queue are lost on shutdown/crashes</li> <li>No replay capability: WebSocket protocol doesn't support message replay</li> <li>Single task limitation: WebSocket connections don't shard like Kafka partitions</li> </ul> <p>Use cases: Best suited for telemetry, monitoring, and scenarios where occasional data loss is acceptable. For critical data, consider additional validation or complementary ingestion methods. See the README for detailed mitigation strategies.</p>"},{"location":"#community-support","title":"Community &amp; Support","text":"<ul> <li>GitHub Issues: Report bugs and request features</li> <li>Slack Community: Join Conduktor Slack</li> <li>Documentation: Full reference guide</li> </ul>"},{"location":"#license","title":"License","text":"<p>Apache License 2.0 - see LICENSE for details.</p>"},{"location":"#ready-to-get-started","title":"Ready to Get Started?","text":"<p>Getting Started Guide View on GitHub See FAQ</p>"},{"location":"changelog/","title":"Changelog","text":"<p>All notable changes to the Kafka Connect WebSocket Source Connector will be documented in this file.</p> <p>The format is based on Keep a Changelog, and this project adheres to Semantic Versioning.</p>"},{"location":"changelog/#unreleased","title":"Unreleased","text":""},{"location":"changelog/#planned-features","title":"Planned Features","text":"<ul> <li> Configurable message transformations (SMTs)</li> <li> Dead letter queue support for failed messages</li> <li> Compression support for Kafka producer</li> <li> Metrics dashboard templates (Grafana)</li> <li> Helm chart for Kubernetes deployments</li> </ul>"},{"location":"changelog/#100-2025-12-17","title":"1.0.0 - 2025-12-17","text":""},{"location":"changelog/#added","title":"Added","text":""},{"location":"changelog/#core-features","title":"Core Features","text":"<ul> <li>Initial release of Kafka Connect WebSocket Source Connector</li> <li>Support for WebSocket (ws://) and WebSocket Secure (wss://) protocols</li> <li>Automatic reconnection with configurable intervals</li> <li>Subscription message support for WebSocket APIs</li> <li>Bearer token authentication via <code>websocket.auth.token</code> parameter</li> <li>Custom HTTP headers support via <code>websocket.headers</code> parameter</li> <li>Configurable message queue with overflow handling</li> <li>Comprehensive logging with periodic metrics</li> </ul>"},{"location":"changelog/#configuration","title":"Configuration","text":"<ul> <li>Required parameters: <code>websocket.url</code>, <code>kafka.topic</code></li> <li>Optional parameters:</li> <li><code>websocket.subscription.message</code> - JSON subscription message</li> <li><code>websocket.reconnect.enabled</code> - Enable/disable reconnection (default: true)</li> <li><code>websocket.reconnect.interval.ms</code> - Reconnection interval (default: 5000ms)</li> <li><code>websocket.headers</code> - Custom headers (format: key1:value1,key2:value2)</li> <li><code>websocket.auth.token</code> - Bearer token for Authorization header</li> <li><code>websocket.message.queue.size</code> - Maximum queue size (default: 10000)</li> <li><code>websocket.connection.timeout.ms</code> - Connection timeout (default: 30000ms)</li> </ul>"},{"location":"changelog/#monitoring-operations","title":"Monitoring &amp; Operations","text":"<ul> <li>JMX metrics exposure via Kafka Connect framework</li> <li>Built-in metrics logging every 30 seconds:</li> <li>Connection status (OPEN/CLOSED/CONNECTING)</li> <li>Messages received count</li> <li>Records produced to Kafka count</li> <li>Queue utilization (current/max percentage)</li> <li>Reconnection attempt counter</li> <li>Integration with Prometheus via JMX Exporter</li> <li>Sample Grafana dashboard configuration</li> <li>Health check script examples</li> </ul>"},{"location":"changelog/#documentation","title":"Documentation","text":"<ul> <li>Comprehensive README with 1,383 lines</li> <li>Quick start guide with multiple examples:</li> <li>WebSocket echo server (testing)</li> <li>Binance cryptocurrency trades</li> <li>Coinbase Level 2 order book</li> <li>Authenticated WebSocket APIs</li> <li>Detailed troubleshooting section with error reference table</li> <li>Architecture documentation with data flow diagram</li> <li>Data reliability guide covering at-most-once semantics</li> <li>Production deployment recommendations</li> </ul>"},{"location":"changelog/#testing","title":"Testing","text":"<ul> <li>Unit tests for connector and configuration</li> <li>Integration tests with mock WebSocket server</li> <li>Configuration validation tests (35 test cases)</li> <li>Test coverage report documenting all scenarios</li> </ul>"},{"location":"changelog/#dependencies","title":"Dependencies","text":"<ul> <li>Apache Kafka Connect API 3.9.0</li> <li>OkHttp WebSocket client 4.12.0</li> <li>SLF4J logging API 1.7.36</li> <li>JUnit 5.9.2 (testing)</li> <li>Mockito 5.2.0 (testing)</li> </ul>"},{"location":"changelog/#technical-details","title":"Technical Details","text":""},{"location":"changelog/#architecture","title":"Architecture","text":"<ul> <li>WebSocketSourceConnector: Main connector class managing configuration and task lifecycle</li> <li>WebSocketSourceTask: Task implementation handling WebSocket connection and message polling</li> <li>WebSocketClient: OkHttp-based WebSocket client with reconnection logic</li> <li>WebSocketSourceConnectorConfig: Configuration definition with validation</li> </ul>"},{"location":"changelog/#data-flow","title":"Data Flow","text":"<pre><code>WebSocket Endpoint \u2192 OkHttp Client \u2192 LinkedBlockingDeque Queue \u2192\nSourceTask.poll() \u2192 SourceRecord \u2192 Kafka Topic\n</code></pre>"},{"location":"changelog/#limitations-documented","title":"Limitations Documented","text":"<ul> <li>Single task per connector (WebSocket protocol constraint)</li> <li>At-most-once delivery semantics</li> <li>No offset management (WebSocket limitation)</li> <li>Messages consumed as strings only</li> <li>In-memory queue data lost on shutdown</li> </ul>"},{"location":"changelog/#known-issues","title":"Known Issues","text":"<ul> <li>None reported in initial release</li> </ul>"},{"location":"changelog/#breaking-changes","title":"Breaking Changes","text":"<p>N/A - Initial release</p>"},{"location":"changelog/#version-history-format","title":"Version History Format","text":""},{"location":"changelog/#xyz-yyyy-mm-dd","title":"[X.Y.Z] - YYYY-MM-DD","text":""},{"location":"changelog/#added_1","title":"Added","text":"<p>Features or capabilities that were added in this release.</p>"},{"location":"changelog/#changed","title":"Changed","text":"<p>Changes in existing functionality or behavior.</p>"},{"location":"changelog/#deprecated","title":"Deprecated","text":"<p>Features that will be removed in future releases.</p>"},{"location":"changelog/#removed","title":"Removed","text":"<p>Features that were removed in this release.</p>"},{"location":"changelog/#fixed","title":"Fixed","text":"<p>Bug fixes and error corrections.</p>"},{"location":"changelog/#security","title":"Security","text":"<p>Security vulnerability fixes and improvements.</p>"},{"location":"changelog/#upgrade-guide","title":"Upgrade Guide","text":""},{"location":"changelog/#from-pre-release-to-100","title":"From Pre-Release to 1.0.0","text":"<p>This is the initial stable release. No migration required.</p>"},{"location":"changelog/#future-upgrades","title":"Future Upgrades","text":"<p>Upgrade instructions will be provided here for future releases.</p>"},{"location":"changelog/#support-policy","title":"Support Policy","text":""},{"location":"changelog/#version-support","title":"Version Support","text":"<ul> <li>Latest stable version: Full support with bug fixes and security updates</li> <li>Previous minor version: Security fixes only</li> <li>Older versions: Community support via GitHub Issues</li> </ul>"},{"location":"changelog/#compatibility-matrix","title":"Compatibility Matrix","text":"Connector Version Min Kafka Version Max Kafka Version Java Version 1.0.0 3.9.0 Latest 11+"},{"location":"changelog/#release-notes-archive","title":"Release Notes Archive","text":""},{"location":"changelog/#release-highlights","title":"Release Highlights","text":""},{"location":"changelog/#100-initial-stable-release-2025-12-17","title":"1.0.0 - Initial Stable Release (2025-12-17)","text":"<p>\ud83c\udf89 First Production-Ready Release</p> <p>The Kafka Connect WebSocket Source Connector is now production-ready with comprehensive features for streaming real-time data from any WebSocket endpoint into Apache Kafka.</p> <p>Key Capabilities: - Stream data from cryptocurrency exchanges (Binance, Coinbase, Kraken) - Connect to IoT sensor streams and telemetry data - Integrate with financial market data feeds - Support for authenticated and custom WebSocket APIs</p> <p>Production Features: - Automatic reconnection with configurable backoff - Built-in monitoring via JMX metrics - Comprehensive error handling and logging - Prometheus/Grafana integration support</p> <p>Getting Started: <pre><code>mvn clean package\ncp target/kafka-connect-websocket-1.0.0.jar $KAFKA_HOME/plugins/kafka-connect-websocket/\n</code></pre></p> <p>Example Configuration: <pre><code>{\n  \"name\": \"binance-btcusdt\",\n  \"config\": {\n    \"connector.class\": \"io.conduktor.connect.websocket.WebSocketSourceConnector\",\n    \"websocket.url\": \"wss://stream.binance.com:9443/ws\",\n    \"kafka.topic\": \"binance-trades\",\n    \"websocket.subscription.message\": \"{\\\"method\\\":\\\"SUBSCRIBE\\\",\\\"params\\\":[\\\"btcusdt@trade\\\"],\\\"id\\\":1}\"\n  }\n}\n</code></pre></p> <p>Important Notes: - At-most-once delivery semantics (see Data Reliability section in README) - Single task per connector (WebSocket protocol limitation) - In-memory queue data lost on shutdown</p>"},{"location":"changelog/#contributing-to-changelog","title":"Contributing to Changelog","text":"<p>When submitting a PR, please update the <code>[Unreleased]</code> section with your changes under the appropriate category (Added, Changed, Fixed, etc.).</p> <p>Format: <pre><code>### Category\n- Brief description of change ([#PR_NUMBER](link))\n</code></pre></p> <p>Example: <pre><code>### Added\n- Support for custom SSL certificates ([#42](https://github.com/conduktor/kafka-connect-websocket/pull/42))\n\n### Fixed\n- Memory leak in queue overflow scenario ([#38](https://github.com/conduktor/kafka-connect-websocket/pull/38))\n</code></pre></p>"},{"location":"changelog/#links","title":"Links","text":"<ul> <li>GitHub Repository</li> <li>Issue Tracker</li> <li>Documentation</li> <li>Conduktor Website</li> </ul>"},{"location":"faq/","title":"Frequently Asked Questions","text":"<p>Common questions and answers about the Kafka Connect WebSocket connector.</p>"},{"location":"faq/#general-questions","title":"General Questions","text":""},{"location":"faq/#what-is-this-connector-used-for","title":"What is this connector used for?","text":"<p>The Kafka Connect WebSocket connector streams real-time data from WebSocket endpoints into Kafka topics. It's ideal for:</p> <ul> <li>Cryptocurrency exchange data (Binance, Coinbase, Kraken)</li> <li>IoT sensor data streams</li> <li>Financial market data feeds</li> <li>Live collaboration tools (chat, presence updates)</li> <li>Gaming platform events</li> <li>Any service exposing a WebSocket API</li> </ul>"},{"location":"faq/#how-does-it-differ-from-a-custom-consumer","title":"How does it differ from a custom consumer?","text":"Feature This Connector Custom Consumer Integration Native Kafka Connect Requires custom code Deployment Kafka Connect framework Separate service/application Monitoring Built-in JMX metrics Manual implementation Reconnection Automatic with backoff Custom implementation Configuration JSON config files Code changes Scalability Kafka Connect clustering DIY clustering"},{"location":"faq/#operational-features","title":"Operational Features","text":"<p>The connector includes:</p> <ul> <li>Comprehensive error handling and automatic reconnection</li> <li>JMX metrics with Prometheus/Grafana integration</li> <li>Operational runbooks (see <code>docs/operations/RUNBOOK.md</code>)</li> <li>91 tests covering integration, resources, offsets, and edge cases</li> <li>Extensive logging and troubleshooting guides</li> </ul> <p>\u26a0\ufe0f Important: At-Most-Once Delivery Semantics</p> <p>This connector provides at-most-once delivery due to architectural limitations (in-memory buffering, no WebSocket replay capability). Messages can be lost during shutdowns, crashes, or network failures. Best suited for telemetry, monitoring, and scenarios where occasional data loss is acceptable. See the README for detailed data loss scenarios and mitigation strategies.</p>"},{"location":"faq/#installation-setup","title":"Installation &amp; Setup","text":""},{"location":"faq/#do-i-need-to-build-from-source","title":"Do I need to build from source?","text":"<p>Yes, currently you need to build from source using Maven:</p> <pre><code>mvn clean package\n</code></pre> <p>A pre-built JAR distribution is planned for future releases.</p>"},{"location":"faq/#which-kafka-version-do-i-need","title":"Which Kafka version do I need?","text":"<p>Minimum: Kafka 3.9.0 Recommended: Latest stable Kafka version</p> <p>The connector uses Kafka Connect API features available in 3.9.0+.</p>"},{"location":"faq/#can-i-use-this-with-confluent-platform","title":"Can I use this with Confluent Platform?","text":"<p>Yes, the connector works with:</p> <ul> <li>Apache Kafka (open source)</li> <li>Confluent Platform</li> <li>Amazon MSK (Managed Streaming for Kafka)</li> <li>Azure Event Hubs for Kafka</li> <li>Any Kafka-compatible platform supporting Connect API</li> </ul>"},{"location":"faq/#where-should-i-install-the-connector-jar","title":"Where should I install the connector JAR?","text":"<p>Install in the Kafka Connect plugin directory:</p> <pre><code># Default locations\n/usr/local/share/kafka/plugins/kafka-connect-websocket/\n# or\n$KAFKA_HOME/plugins/kafka-connect-websocket/\n</code></pre> <p>Ensure <code>plugin.path</code> in <code>connect-distributed.properties</code> includes this location.</p>"},{"location":"faq/#do-i-need-separate-dependency-jars","title":"Do I need separate dependency JARs?","text":"<p>Option 1 (Recommended): Build an uber JAR with dependencies included: <pre><code>mvn clean package shade:shade\n</code></pre></p> <p>Option 2: Copy dependencies separately: <pre><code>mvn dependency:copy-dependencies -DincludeScope=runtime \\\n  -DoutputDirectory=$KAFKA_HOME/plugins/kafka-connect-websocket/\n</code></pre></p> <p>Required dependencies: OkHttp (4.12.0), Okio, Kotlin stdlib.</p>"},{"location":"faq/#configuration","title":"Configuration","text":""},{"location":"faq/#whats-the-minimum-configuration","title":"What's the minimum configuration?","text":"<p>Only two parameters are required:</p> <pre><code>{\n  \"connector.class\": \"io.conduktor.connect.websocket.WebSocketSourceConnector\",\n  \"websocket.url\": \"wss://example.com/ws\",\n  \"kafka.topic\": \"websocket-messages\"\n}\n</code></pre>"},{"location":"faq/#how-do-i-authenticate-to-secured-websocket-endpoints","title":"How do I authenticate to secured WebSocket endpoints?","text":"<p>Use <code>websocket.auth.token</code> for Bearer authentication:</p> <pre><code>{\n  \"websocket.auth.token\": \"your-api-token\"\n}\n</code></pre> <p>This automatically adds: <code>Authorization: Bearer your-api-token</code></p> <p>For custom authentication schemes, use <code>websocket.headers</code>:</p> <pre><code>{\n  \"websocket.headers\": \"X-API-Key:your-key,X-API-Secret:your-secret\"\n}\n</code></pre>"},{"location":"faq/#how-do-i-subscribe-to-specific-channels","title":"How do I subscribe to specific channels?","text":"<p>Use <code>websocket.subscription.message</code> to send a subscription after connection:</p> <pre><code>{\n  \"websocket.subscription.message\": \"{\\\"method\\\":\\\"SUBSCRIBE\\\",\\\"params\\\":[\\\"btcusdt@trade\\\"],\\\"id\\\":1}\"\n}\n</code></pre> <p>This message is sent immediately after the WebSocket connection opens.</p>"},{"location":"faq/#can-i-connect-to-multiple-websocket-endpoints","title":"Can I connect to multiple WebSocket endpoints?","text":"<p>No, each connector instance connects to one WebSocket endpoint. To stream from multiple endpoints:</p> <ol> <li>Create separate connector instances</li> <li>Use different connector names</li> <li>Route to the same or different Kafka topics</li> </ol> <p>Example: <pre><code># Connector 1: Binance BTC/USDT\ncurl -X POST http://localhost:8083/connectors \\\n  -d '{\"name\":\"binance-btcusdt\", \"config\":{...}}'\n\n# Connector 2: Binance ETH/USDT\ncurl -X POST http://localhost:8083/connectors \\\n  -d '{\"name\":\"binance-ethusdt\", \"config\":{...}}'\n</code></pre></p>"},{"location":"faq/#what-happens-if-my-subscription-message-is-rejected","title":"What happens if my subscription message is rejected?","text":"<p>The connector will log an error and continue reconnecting. Common causes:</p> <ul> <li>Invalid JSON syntax - Validate with <code>jq</code> or online tools</li> <li>Wrong subscription format - Check API documentation</li> <li>Missing authentication - Ensure auth token is correct</li> <li>Rate limiting - Reduce reconnection frequency</li> </ul> <p>Check logs for specific error messages.</p>"},{"location":"faq/#data-reliability","title":"Data &amp; Reliability","text":""},{"location":"faq/#what-delivery-guarantees-does-this-connector-provide","title":"What delivery guarantees does this connector provide?","text":"<p>At-most-once delivery semantics:</p> <ul> <li>Messages can be lost (e.g., during crashes)</li> <li>Messages are never duplicated</li> <li>No offset tracking (WebSocket protocol limitation)</li> </ul> <p>See Data Reliability section in the README for detailed information.</p>"},{"location":"faq/#will-i-lose-data-if-the-connector-crashes","title":"Will I lose data if the connector crashes?","text":"<p>Yes. Messages in the in-memory queue (up to <code>websocket.message.queue.size</code>) are lost on:</p> <ul> <li>Connector shutdown</li> <li>JVM crash</li> <li>Kafka Connect worker failure</li> <li>Network interruptions</li> </ul> <p>Mitigation strategies: Data Loss Scenarios in the README</p>"},{"location":"faq/#can-i-replay-historical-websocket-data","title":"Can I replay historical WebSocket data?","text":"<p>No. WebSocket protocol limitations:</p> <ul> <li>No concept of offsets or message positions</li> <li>Server doesn't store historical messages</li> <li>Cannot \"rewind\" after disconnection</li> </ul> <p>Alternative: Use REST API for historical backfill (if available).</p>"},{"location":"faq/#what-data-format-does-the-connector-produce","title":"What data format does the connector produce?","text":"<p>Messages are produced as strings (UTF-8 encoded text):</p> <ul> <li>Schema: <code>STRING</code></li> <li>Value: Raw WebSocket message content</li> <li>Key: <code>null</code> (no message key)</li> </ul> <p>Example Kafka message: <pre><code>{\n  \"topic\": \"websocket-messages\",\n  \"partition\": 0,\n  \"offset\": 12345,\n  \"key\": null,\n  \"value\": \"{\\\"e\\\":\\\"trade\\\",\\\"s\\\":\\\"BTCUSDT\\\",\\\"p\\\":\\\"50000.00\\\"}\"\n}\n</code></pre></p> <p>For structured processing, use Kafka Streams or ksqlDB to parse JSON downstream.</p>"},{"location":"faq/#operations","title":"Operations","text":""},{"location":"faq/#how-do-i-monitor-the-connector","title":"How do I monitor the connector?","text":"<p>Three monitoring approaches:</p> <ol> <li> <p>Built-in Logging (easiest):    <pre><code>tail -f $KAFKA_HOME/logs/connect.log | grep WebSocketSourceTask\n</code></pre></p> </li> <li> <p>JMX Metrics (recommended):</p> </li> <li>Enable JMX in Kafka Connect</li> <li> <p>Use JConsole, VisualVM, or Prometheus JMX Exporter</p> </li> <li> <p>Kafka Connect REST API:    <pre><code>curl http://localhost:8083/connectors/websocket-connector/status\n</code></pre></p> </li> </ol> <p>See Monitoring section in the README for detailed setup.</p>"},{"location":"faq/#what-metrics-should-i-alert-on","title":"What metrics should I alert on?","text":"<p>Critical alerts:</p> <ul> <li>Connector down - <code>connector.state != RUNNING</code></li> <li>No messages received - Zero throughput for &gt; 5 minutes</li> <li>Queue overflow - Queue utilization &gt; 80%</li> <li>High reconnection rate - &gt; 5 reconnects per hour</li> </ul> <p>Warning alerts:</p> <ul> <li>Low throughput - &lt; 50% of expected rate</li> <li>Processing latency - Poll batch time &gt; 1 second</li> </ul>"},{"location":"faq/#how-do-i-troubleshoot-connection-failures","title":"How do I troubleshoot connection failures?","text":"<p>Common diagnostics:</p> <ol> <li> <p>Test endpoint directly:    <pre><code>wscat -c wss://stream.binance.com:9443/ws\n</code></pre></p> </li> <li> <p>Check network connectivity:    <pre><code>telnet stream.binance.com 9443\n</code></pre></p> </li> <li> <p>Review connector logs:    <pre><code>grep \"Failed to connect\" $KAFKA_HOME/logs/connect.log\n</code></pre></p> </li> <li> <p>Verify authentication:    <pre><code>curl -i -H \"Authorization: Bearer TOKEN\" https://api.example.com/\n</code></pre></p> </li> </ol> <p>See Troubleshooting section in the README for detailed solutions.</p>"},{"location":"faq/#how-do-i-update-connector-configuration","title":"How do I update connector configuration?","text":"<p>For running connectors:</p> <pre><code>curl -X PUT http://localhost:8083/connectors/websocket-connector/config \\\n  -H \"Content-Type: application/json\" \\\n  -d @updated-config.json\n</code></pre> <p>The connector will restart automatically with the new configuration.</p> <p>Configuration changes requiring restart: - <code>websocket.url</code> - <code>websocket.auth.token</code> - <code>websocket.subscription.message</code></p> <p>Configuration changes without restart: - <code>kafka.topic</code> (new messages only)</p>"},{"location":"faq/#can-i-pause-and-resume-the-connector","title":"Can I pause and resume the connector?","text":"<p>Yes, use the Kafka Connect REST API:</p> <p>Pause: <pre><code>curl -X PUT http://localhost:8083/connectors/websocket-connector/pause\n</code></pre></p> <p>Resume: <pre><code>curl -X PUT http://localhost:8083/connectors/websocket-connector/resume\n</code></pre></p> <p>Note: Pausing closes the WebSocket connection. Messages sent during the pause are lost.</p>"},{"location":"faq/#performance","title":"Performance","text":""},{"location":"faq/#what-throughput-can-i-expect","title":"What throughput can I expect?","text":"<p>Typical performance on standard hardware (4 CPU, 8 GB RAM):</p> <ul> <li>Message rate: 10,000+ messages/second</li> <li>Latency: &lt; 10ms from WebSocket receipt to Kafka produce</li> <li>Queue capacity: Configurable (default: 10,000 messages)</li> </ul> <p>Actual throughput depends on: - Message size - Kafka broker performance - Network latency - Queue configuration</p>"},{"location":"faq/#how-many-tasks-can-i-run-per-connector","title":"How many tasks can I run per connector?","text":"<p>Always 1 task per connector (WebSocket limitation).</p> <p>WebSocket connections are single-threaded by protocol design. Each connector maintains one WebSocket connection.</p> <p>To parallelize: - Create multiple connector instances - Each connects to a different endpoint or subscription</p>"},{"location":"faq/#whats-the-memory-footprint","title":"What's the memory footprint?","text":"<p>Memory usage depends on queue size and message size:</p> <p>Formula: <pre><code>Memory \u2248 queue_size \u00d7 avg_message_size \u00d7 2\n</code></pre></p> <p>Example: - Queue size: 10,000 messages - Average message: 1 KB - Memory: ~20 MB (with overhead)</p> <p>Recommendation: - Development: 512 MB heap - Production: 2 GB heap</p>"},{"location":"faq/#how-do-i-optimize-throughput","title":"How do I optimize throughput?","text":"<ol> <li> <p>Increase queue size (handle bursts):    <pre><code>websocket.message.queue.size=50000\n</code></pre></p> </li> <li> <p>Optimize Kafka producer (in <code>connect-distributed.properties</code>):    <pre><code>producer.linger.ms=10\nproducer.batch.size=32768\nproducer.compression.type=lz4\n</code></pre></p> </li> <li> <p>Increase partitions (for target topic):    <pre><code>kafka-topics.sh --alter --topic websocket-messages --partitions 10\n</code></pre></p> </li> <li> <p>Scale Kafka brokers (for cluster throughput)</p> </li> </ol>"},{"location":"faq/#development","title":"Development","text":""},{"location":"faq/#can-i-contribute-to-this-project","title":"Can I contribute to this project?","text":"<p>Yes! Contributions are welcome:</p> <ol> <li>Fork the repository</li> <li>Create a feature branch</li> <li>Submit a pull request</li> </ol> <p>See Contributing section in the README for details.</p>"},{"location":"faq/#how-do-i-run-tests-locally","title":"How do I run tests locally?","text":"<pre><code># Unit tests\nmvn test\n\n# Integration tests\nmvn verify\n\n# Specific test\nmvn test -Dtest=WebSocketSourceConnectorTest\n</code></pre>"},{"location":"faq/#how-do-i-build-for-a-different-kafka-version","title":"How do I build for a different Kafka version?","text":"<p>Edit <code>pom.xml</code> and change the Kafka version:</p> <pre><code>&lt;properties&gt;\n  &lt;kafka.version&gt;3.9.0&lt;/kafka.version&gt;  &lt;!-- Change this --&gt;\n&lt;/properties&gt;\n</code></pre> <p>Then rebuild: <pre><code>mvn clean package\n</code></pre></p>"},{"location":"faq/#troubleshooting","title":"Troubleshooting","text":""},{"location":"faq/#why-isnt-my-connector-appearing-in-the-plugin-list","title":"Why isn't my connector appearing in the plugin list?","text":"<p>Check:</p> <ol> <li>JAR is in the correct plugin directory</li> <li><code>plugin.path</code> is configured in <code>connect-distributed.properties</code></li> <li>Kafka Connect was restarted after installation</li> <li>All dependencies (OkHttp, Okio, Kotlin stdlib) are present</li> </ol> <p>Verify: <pre><code>ls -lh $KAFKA_HOME/plugins/kafka-connect-websocket/\ncurl http://localhost:8083/connector-plugins | jq\n</code></pre></p>"},{"location":"faq/#why-do-i-get-classnotfoundexception","title":"Why do I get \"ClassNotFoundException\"?","text":"<p>Cause: Missing connector JAR or wrong plugin path.</p> <p>Solution: <pre><code># Verify plugin directory\necho $KAFKA_HOME/plugins/kafka-connect-websocket/\n\n# Check connect-distributed.properties\ngrep plugin.path config/connect-distributed.properties\n\n# Restart Kafka Connect\nsystemctl restart kafka-connect\n</code></pre></p>"},{"location":"faq/#why-do-i-get-noclassdeffounderror-okhttp3websocket","title":"Why do I get \"NoClassDefFoundError: okhttp3/WebSocket\"?","text":"<p>Cause: Missing OkHttp dependency.</p> <p>Solution: <pre><code># Option 1: Use uber JAR\nmvn clean package shade:shade\n\n# Option 2: Copy dependencies\nmvn dependency:copy-dependencies -DincludeScope=runtime \\\n  -DoutputDirectory=$KAFKA_HOME/plugins/kafka-connect-websocket/\n</code></pre></p>"},{"location":"faq/#why-is-my-queue-constantly-full","title":"Why is my queue constantly full?","text":"<p>Cause: Kafka producer throughput &lt; WebSocket message rate.</p> <p>Solutions:</p> <ol> <li> <p>Increase queue size (temporary):    <pre><code>websocket.message.queue.size=50000\n</code></pre></p> </li> <li> <p>Optimize Kafka producer (permanent):    <pre><code>producer.linger.ms=10\nproducer.batch.size=32768\nproducer.compression.type=lz4\n</code></pre></p> </li> <li> <p>Scale Kafka infrastructure:</p> </li> <li>Add more brokers</li> <li>Increase partition count</li> <li>Use SSD storage</li> </ol> <p>See the Troubleshooting section in the README for details on queue overflow issues.</p>"},{"location":"faq/#compatibility","title":"Compatibility","text":""},{"location":"faq/#does-this-work-with-kafka-2x","title":"Does this work with Kafka 2.x?","text":"<p>No, minimum Kafka version is 3.9.0. The connector uses APIs introduced in Kafka 3.x.</p>"},{"location":"faq/#does-this-work-with-java-8","title":"Does this work with Java 8?","text":"<p>No, minimum Java version is 11. The connector uses Java 11 language features.</p>"},{"location":"faq/#does-this-work-with-kubernetes","title":"Does this work with Kubernetes?","text":"<p>Yes, deploy Kafka Connect in Kubernetes and include this connector in the plugin directory. Common approaches:</p> <ul> <li>Strimzi Kafka Operator - Build custom Connect image with connector</li> <li>Confluent for Kubernetes - Use custom Connect image</li> <li>Helm Charts - Mount plugin directory via ConfigMap/PersistentVolume</li> </ul>"},{"location":"faq/#does-this-work-with-docker","title":"Does this work with Docker?","text":"<p>Yes, create a custom Kafka Connect Docker image:</p> <pre><code>FROM confluentinc/cp-kafka-connect:7.5.0\n\n# Copy connector and dependencies\nCOPY kafka-connect-websocket-1.0.0.jar /usr/share/confluent-hub-components/kafka-connect-websocket/\nCOPY okhttp-4.12.0.jar /usr/share/confluent-hub-components/kafka-connect-websocket/\nCOPY okio-*.jar /usr/share/confluent-hub-components/kafka-connect-websocket/\nCOPY kotlin-stdlib-*.jar /usr/share/confluent-hub-components/kafka-connect-websocket/\n</code></pre>"},{"location":"faq/#still-have-questions","title":"Still Have Questions?","text":"<ul> <li>GitHub Issues: Open an issue</li> <li>Slack Community: Join Conduktor Slack</li> <li>Documentation: Browse documentation</li> </ul>"},{"location":"getting-started/","title":"Getting Started","text":"<p>This guide will help you install, configure, and deploy your first Kafka Connect WebSocket connector.</p>"},{"location":"getting-started/#overview","title":"Overview","text":"<p>The Kafka Connect WebSocket Source Connector enables you to stream real-time data from any WebSocket endpoint directly into Apache Kafka topics. It handles connection management, reconnection logic, and integrates seamlessly with Kafka Connect's distributed architecture.</p>"},{"location":"getting-started/#what-youll-learn","title":"What You'll Learn","text":"<p>In this section, you'll learn how to:</p> <ol> <li>Prerequisites - Verify your environment has the required dependencies</li> <li>Installation - Install the connector in your Kafka Connect cluster (see main README)</li> <li>Quick Start - Deploy your first connector and verify it's working (see main README)</li> </ol>"},{"location":"getting-started/#deployment-options","title":"Deployment Options","text":"<p>Choose the deployment method that best fits your environment:</p>"},{"location":"getting-started/#distributed-mode-production","title":"Distributed Mode (Production)","text":"<p>Best for: - Production deployments - High availability requirements - Multiple connectors - Horizontal scaling</p> <p>Configuration: <pre><code># config/connect-distributed.properties\nplugin.path=/usr/local/share/kafka/plugins\n</code></pre></p>"},{"location":"getting-started/#standalone-mode-development","title":"Standalone Mode (Development)","text":"<p>Best for: - Local development - Testing - Single connector instances - Quick prototyping</p> <p>Configuration: <pre><code># config/connect-standalone.properties\nplugin.path=/usr/local/share/kafka/plugins\n</code></pre></p>"},{"location":"getting-started/#system-requirements","title":"System Requirements","text":""},{"location":"getting-started/#minimum-requirements","title":"Minimum Requirements","text":"<ul> <li>Java: 11 or higher</li> <li>Kafka: 3.9.0 or higher</li> <li>Memory: 512 MB RAM for connector</li> <li>Network: Access to WebSocket endpoint (outbound connections)</li> </ul>"},{"location":"getting-started/#recommended-for-production","title":"Recommended for Production","text":"<ul> <li>Java: 17 (LTS)</li> <li>Kafka: Latest stable version</li> <li>Memory: 2 GB RAM for Kafka Connect worker</li> <li>CPU: 2+ cores</li> <li>Network: Low-latency connection to WebSocket server</li> </ul>"},{"location":"getting-started/#support-matrix","title":"Support Matrix","text":"Component Minimum Version Recommended Version Tested Versions Java 11 17 11, 17, 21 Kafka 3.9.0 3.9.0+ 3.9.0 Maven 3.6+ 3.9+ 3.6, 3.8, 3.9 OkHttp 4.12.0 4.12.0 4.12.0"},{"location":"getting-started/#quick-links","title":"Quick Links","text":""},{"location":"getting-started/#main-readme","title":"Main README","text":"<p>Complete documentation with installation, configuration, and usage examples.</p>"},{"location":"getting-started/#faq","title":"FAQ","text":"<p>Frequently asked questions and troubleshooting tips.</p>"},{"location":"getting-started/#changelog","title":"Changelog","text":"<p>Version history, new features, and bug fixes.</p>"},{"location":"getting-started/#before-you-begin","title":"Before You Begin","text":"<p>Check Your Environment</p> <p>Before proceeding, ensure you have:</p> <ul> <li> Java 11+ installed (<code>java -version</code>)</li> <li> Kafka 3.9.0+ running</li> <li> Access to build the connector (Maven 3.6+)</li> <li> Network access to your target WebSocket endpoint</li> </ul> <p>Production Considerations</p> <p>For production deployments, review the Data Reliability section in the main README to understand the connector's at-most-once semantics and data loss scenarios.</p>"},{"location":"getting-started/#next-steps","title":"Next Steps","text":"<p>Ready to install? Start with:</p> <ol> <li>Prerequisites - Verify your environment</li> <li>Main README - Follow the installation guide</li> <li>Examples - Deploy your first connector</li> </ol> <p>Need help? Check our FAQ or open an issue.</p>"},{"location":"getting-started/prerequisites/","title":"Prerequisites","text":"<p>Before installing the Kafka Connect WebSocket connector, ensure your environment meets the following requirements.</p>"},{"location":"getting-started/prerequisites/#required-software","title":"Required Software","text":""},{"location":"getting-started/prerequisites/#java-development-kit-jdk","title":"Java Development Kit (JDK)","text":"<p>Minimum Version: Java 11 Recommended: Java 17 (LTS)</p> Check Java VersionInstall Java (Ubuntu/Debian)Install Java (macOS)Install Java (RHEL/CentOS) <pre><code>java -version\n</code></pre> <p>Expected output: <pre><code>openjdk version \"17.0.9\" 2023-10-17 LTS\nOpenJDK Runtime Environment (build 17.0.9+9-LTS)\n</code></pre></p> <pre><code>sudo apt update\nsudo apt install openjdk-17-jdk\n</code></pre> <pre><code>brew install openjdk@17\n</code></pre> <pre><code>sudo yum install java-17-openjdk-devel\n</code></pre>"},{"location":"getting-started/prerequisites/#apache-kafka","title":"Apache Kafka","text":"<p>Minimum Version: 3.9.0 Download: Apache Kafka Downloads</p> Verify Kafka InstallationQuick Kafka Setup (Local) <pre><code>kafka-topics.sh --version\n</code></pre> <p>Expected output: <pre><code>3.9.0 (Commit:...)\n</code></pre></p> <pre><code># Download Kafka\nwget https://downloads.apache.org/kafka/3.9.0/kafka_2.13-3.9.0.tgz\ntar -xzf kafka_2.13-3.9.0.tgz\ncd kafka_2.13-3.9.0\n\n# Start Kafka (KRaft mode)\nKAFKA_CLUSTER_ID=\"$(bin/kafka-storage.sh random-uuid)\"\nbin/kafka-storage.sh format -t $KAFKA_CLUSTER_ID -c config/kraft/server.properties\nbin/kafka-server-start.sh config/kraft/server.properties\n</code></pre>"},{"location":"getting-started/prerequisites/#maven-for-building-from-source","title":"Maven (for building from source)","text":"<p>Minimum Version: 3.6+ Recommended: 3.9+</p> <pre><code>mvn --version\n</code></pre> <p>Expected output: <pre><code>Apache Maven 3.9.5\nMaven home: /usr/share/maven\nJava version: 17.0.9\n</code></pre></p>"},{"location":"getting-started/prerequisites/#network-requirements","title":"Network Requirements","text":""},{"location":"getting-started/prerequisites/#outbound-connectivity","title":"Outbound Connectivity","text":"<p>The connector requires outbound access to WebSocket endpoints:</p> Protocol Port Purpose WebSocket (ws) 80 Unencrypted WebSocket connections WebSocket Secure (wss) 443 TLS-encrypted WebSocket connections <p>Test WebSocket Connectivity</p> <pre><code># Install wscat (WebSocket testing tool)\nnpm install -g wscat\n\n# Test connection\nwscat -c wss://stream.binance.com:9443/ws\n</code></pre>"},{"location":"getting-started/prerequisites/#firewall-configuration","title":"Firewall Configuration","text":"<p>If behind a corporate firewall, ensure WebSocket upgrade requests are allowed:</p> <pre><code># Test with curl\ncurl -i -N \\\n  -H \"Connection: Upgrade\" \\\n  -H \"Upgrade: websocket\" \\\n  -H \"Sec-WebSocket-Version: 13\" \\\n  -H \"Sec-WebSocket-Key: test\" \\\n  https://stream.binance.com:9443/ws\n</code></pre> <p>Expected response: <pre><code>HTTP/1.1 101 Switching Protocols\nUpgrade: websocket\nConnection: Upgrade\n</code></pre></p>"},{"location":"getting-started/prerequisites/#proxy-configuration","title":"Proxy Configuration","text":"<p>If using a corporate proxy:</p> <pre><code># Set proxy environment variables\nexport https_proxy=http://proxy.company.com:8080\nexport http_proxy=http://proxy.company.com:8080\n\n# Configure Java proxy (add to Kafka Connect startup)\nexport KAFKA_OPTS=\"-Dhttps.proxyHost=proxy.company.com \\\n                   -Dhttps.proxyPort=8080 \\\n                   -Dhttp.proxyHost=proxy.company.com \\\n                   -Dhttp.proxyPort=8080\"\n</code></pre>"},{"location":"getting-started/prerequisites/#kafka-connect-setup","title":"Kafka Connect Setup","text":""},{"location":"getting-started/prerequisites/#distributed-mode-recommended-for-production","title":"Distributed Mode (Recommended for Production)","text":"<p>Ensure Kafka Connect is running in distributed mode:</p> <pre><code># Check if Connect is running\ncurl http://localhost:8083/\n</code></pre> <p>Expected response: <pre><code>{\n  \"version\": \"3.9.0\",\n  \"commit\": \"...\",\n  \"kafka_cluster_id\": \"...\"\n}\n</code></pre></p>"},{"location":"getting-started/prerequisites/#internal-topics-configuration","title":"Internal Topics Configuration","text":"<p>Kafka Connect in distributed mode requires three internal topics. These are typically auto-created, but for production you should pre-create them with proper replication:</p> <pre><code># In connect-distributed.properties\noffset.storage.topic=connect-offsets\noffset.storage.replication.factor=3\noffset.storage.partitions=25\n\nconfig.storage.topic=connect-configs\nconfig.storage.replication.factor=3\nconfig.storage.partitions=1\n\nstatus.storage.topic=connect-status\nstatus.storage.replication.factor=3\nstatus.storage.partitions=5\n</code></pre> <p>Topic Purpose</p> <ul> <li>connect-offsets: Stores source connector offsets (committed but not usable for replay with this WebSocket connector)</li> <li>connect-configs: Stores connector and task configurations</li> <li>connect-status: Stores connector and task status</li> </ul>"},{"location":"getting-started/prerequisites/#producer-configuration","title":"Producer Configuration","text":"<p>Configure producer settings for source connectors in <code>connect-distributed.properties</code>:</p> <pre><code># Optimize for throughput\nproducer.linger.ms=10\nproducer.batch.size=32768\nproducer.compression.type=lz4\nproducer.acks=1\n</code></pre>"},{"location":"getting-started/prerequisites/#plugin-directory","title":"Plugin Directory","text":"<p>Verify the plugin path is configured:</p> <pre><code># Check connect-distributed.properties\ngrep plugin.path $KAFKA_HOME/config/connect-distributed.properties\n</code></pre> <p>Expected output: <pre><code>plugin.path=/usr/local/share/kafka/plugins\n</code></pre></p> <p>Plugin Path Must Exist</p> <p>The plugin directory must exist and have proper permissions: <pre><code>sudo mkdir -p /usr/local/share/kafka/plugins\nsudo chown -R $USER:$USER /usr/local/share/kafka/plugins\n</code></pre></p>"},{"location":"getting-started/prerequisites/#resource-requirements","title":"Resource Requirements","text":""},{"location":"getting-started/prerequisites/#minimum-resources","title":"Minimum Resources","text":"<p>For development/testing:</p> Resource Requirement CPU 1 core Memory 512 MB for connector Disk 100 MB for JAR files Network 10 Mbps"},{"location":"getting-started/prerequisites/#production-resources","title":"Production Resources","text":"<p>For production deployments:</p> Resource Requirement CPU 2+ cores Memory 2 GB for Kafka Connect worker Disk 1 GB (for JARs + logs) Network 100+ Mbps"},{"location":"getting-started/prerequisites/#memory-configuration","title":"Memory Configuration","text":"<p>Configure heap size for Kafka Connect:</p> <pre><code># In connect-distributed.sh or systemd service\nexport KAFKA_HEAP_OPTS=\"-Xms2G -Xmx2G\"\n</code></pre>"},{"location":"getting-started/prerequisites/#security-configuration","title":"Security Configuration","text":""},{"location":"getting-started/prerequisites/#secure-jmx-access","title":"Secure JMX Access","text":"<p>For production, enable JMX authentication:</p> <pre><code># Create password file\necho \"admin changeit\" &gt; /etc/kafka/jmx.password\nchmod 600 /etc/kafka/jmx.password\n\n# Create access file\necho \"admin readwrite\" &gt; /etc/kafka/jmx.access\nchmod 644 /etc/kafka/jmx.access\n\n# Configure Kafka Connect\nexport KAFKA_JMX_OPTS=\"-Dcom.sun.management.jmxremote \\\n  -Dcom.sun.management.jmxremote.authenticate=true \\\n  -Dcom.sun.management.jmxremote.password.file=/etc/kafka/jmx.password \\\n  -Dcom.sun.management.jmxremote.access.file=/etc/kafka/jmx.access \\\n  -Dcom.sun.management.jmxremote.ssl=true\"\n</code></pre> <p>Never Run JMX Without Authentication in Production</p> <p>Default JMX configuration with <code>authenticate=false</code> exposes your connector to unauthorized access.</p>"},{"location":"getting-started/prerequisites/#protect-authentication-tokens","title":"Protect Authentication Tokens","text":"<p>Do NOT store tokens in plaintext config files. Use Kafka Connect's ConfigProvider:</p> <pre><code>{\n  \"websocket.auth.token\": \"${file:/etc/kafka/secrets.properties:websocket.token}\",\n  \"config.providers\": \"file\",\n  \"config.providers.file.class\": \"org.apache.kafka.common.config.provider.FileConfigProvider\"\n}\n</code></pre> <p>Create <code>/etc/kafka/secrets.properties</code> with restricted permissions:</p> <pre><code>echo \"websocket.token=your-secret-token\" &gt; /etc/kafka/secrets.properties\nchmod 600 /etc/kafka/secrets.properties\n</code></pre>"},{"location":"getting-started/prerequisites/#ssltls-for-websocket","title":"SSL/TLS for WebSocket","text":"<p>For <code>wss://</code> endpoints, ensure Java trusts the server certificate:</p> <pre><code># Add certificate to truststore\nkeytool -import -trustcacerts -alias myserver \\\n  -file server.crt \\\n  -keystore $JAVA_HOME/lib/security/cacerts \\\n  -storepass changeit\n</code></pre>"},{"location":"getting-started/prerequisites/#optional-tools","title":"Optional Tools","text":""},{"location":"getting-started/prerequisites/#monitoring-tools","title":"Monitoring Tools","text":"<p>For production deployments, consider installing:</p> <ul> <li>JMX Monitoring: JConsole, VisualVM, or JMX Exporter</li> <li>Prometheus: For metrics collection</li> <li>Grafana: For dashboards</li> <li>Loki/ELK: For log aggregation</li> </ul>"},{"location":"getting-started/prerequisites/#development-tools","title":"Development Tools","text":"<p>For connector development:</p> <ul> <li>Git: Version control</li> <li>Docker: Containerized Kafka setup</li> <li>curl/jq: API testing and JSON parsing</li> </ul>"},{"location":"getting-started/prerequisites/#verification-checklist","title":"Verification Checklist","text":"<p>Before proceeding to installation, verify:</p> <ul> <li> Java 11+ is installed and <code>java -version</code> works</li> <li> Kafka 3.9.0+ is running</li> <li> Kafka Connect REST API is accessible at <code>http://localhost:8083/</code></li> <li> Plugin directory exists and is writable</li> <li> Maven 3.6+ is installed (for building from source)</li> <li> Network access to WebSocket endpoints is available</li> <li> Firewall/proxy allows WebSocket connections</li> </ul>"},{"location":"getting-started/prerequisites/#troubleshooting-prerequisites","title":"Troubleshooting Prerequisites","text":""},{"location":"getting-started/prerequisites/#java-version-issues","title":"Java Version Issues","text":"<p>Problem: Wrong Java version</p> <pre><code># Check all Java installations\nls -la /usr/lib/jvm/\n\n# Set JAVA_HOME\nexport JAVA_HOME=/usr/lib/jvm/java-17-openjdk-amd64\nexport PATH=$JAVA_HOME/bin:$PATH\n</code></pre>"},{"location":"getting-started/prerequisites/#kafka-not-running","title":"Kafka Not Running","text":"<p>Problem: Kafka Connect not accessible</p> <pre><code># Check Kafka Connect logs\ntail -f $KAFKA_HOME/logs/connect.log\n\n# Restart Kafka Connect\n$KAFKA_HOME/bin/connect-distributed.sh config/connect-distributed.properties\n</code></pre>"},{"location":"getting-started/prerequisites/#network-connectivity-issues","title":"Network Connectivity Issues","text":"<p>Problem: Cannot reach WebSocket endpoint</p> <pre><code># Test DNS resolution\nnslookup stream.binance.com\n\n# Test port connectivity\ntelnet stream.binance.com 9443\n\n# Test WebSocket handshake\ncurl -i -N \\\n  -H \"Connection: Upgrade\" \\\n  -H \"Upgrade: websocket\" \\\n  -H \"Sec-WebSocket-Version: 13\" \\\n  -H \"Sec-WebSocket-Key: test\" \\\n  https://stream.binance.com:9443/ws\n</code></pre>"},{"location":"getting-started/prerequisites/#next-steps","title":"Next Steps","text":"<p>Once all prerequisites are met:</p> <ol> <li>Installation - Install the connector</li> <li>Quick Start - Deploy your first connector</li> </ol> <p>Need help? Check our FAQ or open an issue.</p>"},{"location":"operations/RUNBOOK/","title":"WebSocket Source Connector - Operational Runbook","text":"<p>This runbook provides operational guidance for monitoring, troubleshooting, and maintaining the WebSocket Source Connector in production.</p>"},{"location":"operations/RUNBOOK/#table-of-contents","title":"Table of Contents","text":"<ul> <li>Incident Response Decision Tree</li> <li>Monitoring</li> <li>Common Issues</li> <li>Performance Tuning</li> <li>Troubleshooting</li> <li>Recovery Procedures</li> </ul>"},{"location":"operations/RUNBOOK/#incident-response-decision-tree","title":"Incident Response Decision Tree","text":"<p>Use this decision tree when an alert fires or an issue is reported:</p> <pre><code>START: Alert or Issue Reported\n\u2502\n\u251c\u2500 Is connector in RUNNING state?\n\u2502  \u2502  curl http://localhost:8083/connectors/&lt;name&gt;/status | jq '.connector.state'\n\u2502  \u2502\n\u2502  \u2514\u2500 NO \u2192 Go to [Connector Not Running](#issue-connector-not-running)\n\u2502  \u2514\u2500 YES \u2192 Continue \u2193\n\u2502\n\u251c\u2500 Is WebSocket connected? (isConnected = true)\n\u2502  \u2502  Check JMX: io.conduktor.connect.websocket:*/isConnected\n\u2502  \u2502\n\u2502  \u2514\u2500 NO \u2192 Go to [Connection Issues](#issue-1-connection-keeps-dropping)\n\u2502  \u2514\u2500 YES \u2192 Continue \u2193\n\u2502\n\u251c\u2500 Are messages being received? (MessagesReceived increasing)\n\u2502  \u2502  Check JMX: io.conduktor.connect.websocket:*/MessagesReceived\n\u2502  \u2502\n\u2502  \u2514\u2500 NO \u2192 Go to [No Messages Received](#issue-3-no-messages-received)\n\u2502  \u2514\u2500 YES \u2192 Continue \u2193\n\u2502\n\u251c\u2500 Is queue near capacity? (QueueUtilizationPercent &gt; 80%)\n\u2502  \u2502  Check JMX: io.conduktor.connect.websocket:*/QueueUtilizationPercent\n\u2502  \u2502\n\u2502  \u2514\u2500 YES \u2192 Go to [High Message Drop Rate](#issue-2-high-message-drop-rate)\n\u2502  \u2514\u2500 NO \u2192 Continue \u2193\n\u2502\n\u251c\u2500 Is Kafka write lagging? (RecordsProduced &lt;&lt; MessagesReceived)\n\u2502  \u2502  Check lag: MessagesReceived - RecordsProduced &gt; 10000\n\u2502  \u2502\n\u2502  \u2514\u2500 YES \u2192 Go to [Processing Lag](#issue-4-processing-lag-building-up)\n\u2502  \u2514\u2500 NO \u2192 Continue \u2193\n\u2502\n\u2514\u2500 Check logs for errors\n   \u2502  grep \"ERROR\\|WARN\" $KAFKA_HOME/logs/connect.log | tail -50\n   \u2502\n   \u2514\u2500 Errors found \u2192 Match error to [Common Issues](#common-issues)\n   \u2514\u2500 No errors \u2192 Monitor, escalate if issue persists\n</code></pre>"},{"location":"operations/RUNBOOK/#quick-commands-reference","title":"Quick Commands Reference","text":"<pre><code># Check connector status\ncurl -s http://localhost:8083/connectors/&lt;name&gt;/status | jq .\n\n# Restart connector\ncurl -X POST http://localhost:8083/connectors/&lt;name&gt;/restart\n\n# Restart specific task\ncurl -X POST http://localhost:8083/connectors/&lt;name&gt;/tasks/0/restart\n\n# Check recent logs\ntail -100 $KAFKA_HOME/logs/connect.log | grep -E \"WebSocket|ERROR|WARN\"\n\n# Check JMX metrics (requires jmxterm)\necho \"get -b io.conduktor.connect.websocket:* isConnected\" | \\\n  java -jar jmxterm.jar -l localhost:9999\n</code></pre>"},{"location":"operations/RUNBOOK/#issue-connector-not-running","title":"Issue: Connector Not Running","text":"<p>Symptoms: Connector state is FAILED or task state is FAILED</p> <p>Quick Fix: <pre><code># Check the error message\ncurl -s http://localhost:8083/connectors/&lt;name&gt;/status | jq '.tasks[0].trace'\n\n# Restart connector\ncurl -X POST http://localhost:8083/connectors/&lt;name&gt;/restart\n\n# If still failing, check config and redeploy\ncurl -X DELETE http://localhost:8083/connectors/&lt;name&gt;\ncurl -X POST http://localhost:8083/connectors -H \"Content-Type: application/json\" -d @connector.json\n</code></pre></p> <p>Common Causes: - Invalid configuration (bad URL, malformed JSON) - Authentication failure - Missing dependencies (ClassNotFoundException)</p>"},{"location":"operations/RUNBOOK/#monitoring","title":"Monitoring","text":""},{"location":"operations/RUNBOOK/#key-jmx-metrics","title":"Key JMX Metrics","text":"<p>The connector exposes the following JMX metrics under <code>io.conduktor.connect.websocket:type=WebSocketConnector,name=&lt;connector-name&gt;,url=&lt;sanitized-url&gt;</code>:</p>"},{"location":"operations/RUNBOOK/#counter-metrics","title":"Counter Metrics","text":"<ul> <li>MessagesReceived: Total messages received from WebSocket</li> <li>Alert: Rate drops to 0 for &gt; 5 minutes \u2192 Connection issue</li> <li> <p>Action: Check <code>isConnected</code> metric, review logs for connection errors</p> </li> <li> <p>MessagesDropped: Messages dropped due to queue overflow</p> </li> <li>Alert: Drop rate &gt; 1% \u2192 Queue capacity insufficient</li> <li> <p>Action: Increase <code>websocket.message.queue.size</code> or optimize consumer throughput</p> </li> <li> <p>RecordsProduced: Total records written to Kafka</p> </li> <li>Alert: Lag (MessagesReceived - RecordsProduced) &gt; 10000 \u2192 Processing backlog</li> <li>Action: Check Kafka broker health, review consumer lag</li> </ul>"},{"location":"operations/RUNBOOK/#queue-metrics","title":"Queue Metrics","text":"<ul> <li>QueueSize: Current number of messages in queue</li> <li>QueueCapacity: Maximum queue capacity</li> <li>QueueUtilizationPercent: (QueueSize / QueueCapacity) * 100</li> <li>Alert: Utilization &gt; 80% \u2192 Approaching capacity</li> <li>Action: Monitor for drops, consider increasing queue size</li> </ul>"},{"location":"operations/RUNBOOK/#connection-metrics","title":"Connection Metrics","text":"<ul> <li>isConnected: Boolean indicating WebSocket connection status</li> <li>Alert: false for &gt; 2 minutes \u2192 Connection failure</li> <li> <p>Action: Check WebSocket endpoint availability, review authentication</p> </li> <li> <p>MillisSinceLastMessage: Time since last message received</p> </li> <li>Alert: &gt; 300000ms (5 minutes) when messages expected \u2192 Stale connection</li> <li> <p>Action: Check endpoint health, verify reconnection logic</p> </li> <li> <p>UptimeMillis: Connection uptime in milliseconds</p> </li> <li> <p>Info: Use to track connection stability</p> </li> <li> <p>TotalReconnects: Total reconnection attempts</p> </li> <li>Alert: Rapid increase (&gt;10 in 5 minutes) \u2192 Unstable connection</li> <li>Action: Review connection stability, check network/firewall</li> </ul>"},{"location":"operations/RUNBOOK/#derived-metrics","title":"Derived Metrics","text":"<ul> <li>LagCount: MessagesReceived - RecordsProduced</li> <li>Alert: &gt; 10000 \u2192 Processing backlog</li> <li> <p>Action: Review Kafka consumer performance</p> </li> <li> <p>DropRate: (MessagesDropped / MessagesReceived) * 100</p> </li> <li>Alert: &gt; 1% \u2192 Significant message loss</li> <li>Action: Increase queue size or optimize throughput</li> </ul>"},{"location":"operations/RUNBOOK/#recommended-alerts","title":"Recommended Alerts","text":"<pre><code># Example Prometheus alerting rules\ngroups:\n  - name: websocket_connector\n    rules:\n      - alert: WebSocketDisconnected\n        expr: websocket_isConnected == 0\n        for: 2m\n        annotations:\n          summary: \"WebSocket connection lost for {{ $labels.connector_name }}\"\n          description: \"Connection to {{ $labels.url }} has been down for 2 minutes\"\n\n      - alert: HighMessageDropRate\n        expr: websocket_DropRate &gt; 1\n        for: 5m\n        annotations:\n          summary: \"High message drop rate for {{ $labels.connector_name }}\"\n          description: \"Dropping {{ $value }}% of messages - queue capacity insufficient\"\n\n      - alert: HighProcessingLag\n        expr: websocket_LagCount &gt; 10000\n        for: 5m\n        annotations:\n          summary: \"High processing lag for {{ $labels.connector_name }}\"\n          description: \"Lag count: {{ $value }} - Kafka throughput issue\"\n\n      - alert: FrequentReconnections\n        expr: increase(websocket_TotalReconnects[5m]) &gt; 10\n        annotations:\n          summary: \"Frequent reconnections for {{ $labels.connector_name }}\"\n          description: \"{{ $value }} reconnections in 5 minutes - unstable connection\"\n</code></pre>"},{"location":"operations/RUNBOOK/#common-issues","title":"Common Issues","text":""},{"location":"operations/RUNBOOK/#issue-1-connection-keeps-dropping","title":"Issue 1: Connection Keeps Dropping","text":"<p>Symptoms: - <code>isConnected</code> metric flipping between true/false - <code>TotalReconnects</code> incrementing rapidly - Logs showing \"Connection closed\" or \"Connection failed\"</p> <p>Root Causes: 1. Network instability 2. WebSocket endpoint issues 3. Firewall/proxy timeout 4. Authentication token expiration</p> <p>Resolution: <pre><code># Check connector status\ncurl -s http://localhost:8083/connectors/websocket-source/status | jq .\n\n# Review recent logs\nkubectl logs -l app=kafka-connect --tail=100 | grep \"WebSocket\"\n\n# Verify endpoint health\ncurl -H \"Connection: Upgrade\" -H \"Upgrade: websocket\" &lt;websocket-url&gt;\n\n# Actions:\n1. Increase websocket.connection.timeout.ms (default: 30000)\n2. Enable reconnection: websocket.reconnect.enabled=true\n3. Adjust reconnect interval: websocket.reconnect.interval.ms=10000\n4. Check authentication token validity\n</code></pre></p>"},{"location":"operations/RUNBOOK/#issue-2-high-message-drop-rate","title":"Issue 2: High Message Drop Rate","text":"<p>Symptoms: - <code>DropRate</code> metric &gt; 1% - <code>MessagesDropped</code> incrementing - <code>QueueUtilizationPercent</code> at 100% - Logs showing \"Queue full, dropping message\"</p> <p>Root Causes: 1. Queue capacity too small 2. Kafka broker throughput bottleneck 3. Consumer lag</p> <p>Resolution: <pre><code># Check queue metrics\njconsole # Connect to JMX and view queue metrics\n\n# Actions:\n1. Increase queue size: websocket.message.queue.size=20000 (default: 10000)\n2. Check Kafka broker health:\n   kafka-broker-api-versions --bootstrap-server localhost:9092\n3. Monitor consumer lag:\n   kafka-consumer-groups --bootstrap-server localhost:9092 --group &lt;group&gt; --describe\n4. Scale Kafka brokers if needed\n</code></pre></p>"},{"location":"operations/RUNBOOK/#issue-3-no-messages-received","title":"Issue 3: No Messages Received","text":"<p>Symptoms: - <code>MessagesReceived</code> not incrementing - <code>isConnected</code> = true - No errors in logs</p> <p>Root Causes: 1. Subscription message not sent or incorrect 2. WebSocket endpoint not sending data 3. Endpoint requires specific subscription format</p> <p>Resolution: <pre><code># Verify subscription message format\ncat connector-config.json | jq .config.\\\"websocket.subscription.message\\\"\n\n# Test endpoint manually\nwscat -c wss://api.example.com/stream -x '{\"action\":\"subscribe\",\"channel\":\"test\"}'\n\n# Actions:\n1. Verify subscription message syntax matches endpoint requirements\n2. Check endpoint documentation for subscription format\n3. Test with curl/wscat to confirm endpoint is sending data\n4. Review MillisSinceLastMessage metric\n</code></pre></p>"},{"location":"operations/RUNBOOK/#issue-4-processing-lag-building-up","title":"Issue 4: Processing Lag Building Up","text":"<p>Symptoms: - <code>LagCount</code> increasing - <code>QueueSize</code> growing - <code>RecordsProduced</code> not keeping pace with <code>MessagesReceived</code></p> <p>Root Causes: 1. Kafka broker slowness 2. Network issues to Kafka 3. Kafka topic partitions insufficient 4. Serialization bottleneck</p> <p>Resolution: <pre><code># Check Kafka broker metrics\nkafka-run-class kafka.tools.JmxTool \\\n  --object-name kafka.server:type=BrokerTopicMetrics,name=MessagesInPerSec \\\n  --jmx-url service:jmx:rmi:///jndi/rmi://localhost:9999/jmxrmi\n\n# Check topic configuration\nkafka-topics --bootstrap-server localhost:9092 --describe --topic &lt;topic-name&gt;\n\n# Actions:\n1. Increase topic partitions for parallelism\n2. Check Kafka broker disk I/O and network throughput\n3. Monitor Kafka producer metrics\n4. Review connector logs for serialization errors\n</code></pre></p>"},{"location":"operations/RUNBOOK/#performance-tuning","title":"Performance Tuning","text":""},{"location":"operations/RUNBOOK/#queue-sizing","title":"Queue Sizing","text":"<p>Default: 10000 messages</p> <p>Recommendations: - Low-volume, low-latency: 1000-5000 - Medium-volume: 10000-20000 (default) - High-volume (&gt;1000 msg/sec): 50000-100000</p> <p>Trade-offs: - Larger queue = more memory usage - Smaller queue = more drops under burst traffic</p>"},{"location":"operations/RUNBOOK/#reconnection-settings","title":"Reconnection Settings","text":"<p>Production Recommendations: <pre><code>websocket.reconnect.enabled=true\nwebsocket.reconnect.interval.ms=5000\nwebsocket.reconnect.max.attempts=-1  # infinite retries\nwebsocket.reconnect.backoff.max.ms=60000\n</code></pre></p> <p>Dev/Test Recommendations: <pre><code>websocket.reconnect.enabled=true\nwebsocket.reconnect.interval.ms=1000\nwebsocket.reconnect.max.attempts=10\nwebsocket.reconnect.backoff.max.ms=10000\n</code></pre></p>"},{"location":"operations/RUNBOOK/#connection-timeout","title":"Connection Timeout","text":"<p>Default: 30000ms (30 seconds)</p> <p>Adjust based on network latency: - Local network: 10000ms - Same region: 30000ms (default) - Cross-region: 60000ms - Unstable network: 90000ms</p>"},{"location":"operations/RUNBOOK/#troubleshooting","title":"Troubleshooting","text":""},{"location":"operations/RUNBOOK/#debug-logging","title":"Debug Logging","text":"<p>Enable debug logging for detailed troubleshooting:</p> <pre><code># Connector logging\nlog4j.logger.io.conduktor.connect.websocket=DEBUG\n\n# OkHttp WebSocket logging\nlog4j.logger.okhttp3=DEBUG\n</code></pre>"},{"location":"operations/RUNBOOK/#common-log-messages","title":"Common Log Messages","text":"Log Message Severity Meaning Action \"Connection opened\" INFO WebSocket connected Normal operation \"Connection closed: code=1000\" INFO Normal closure Reconnection will occur if enabled \"Connection failed\" ERROR Connection attempt failed Check endpoint availability \"Queue full, dropping message\" WARN Queue overflow Increase queue size \"Failed to send subscription message\" ERROR Subscription failed Verify message format \"Reconnecting in X ms\" INFO Waiting to reconnect Normal if occasional"},{"location":"operations/RUNBOOK/#health-check","title":"Health Check","text":"<p>Create a health check script:</p> <pre><code>#!/bin/bash\n# health-check.sh\n\nCONNECTOR_NAME=\"websocket-source\"\nCONNECT_URL=\"http://localhost:8083\"\n\n# Check connector status\nSTATUS=$(curl -s $CONNECT_URL/connectors/$CONNECTOR_NAME/status | jq -r '.connector.state')\n\nif [ \"$STATUS\" != \"RUNNING\" ]; then\n  echo \"CRITICAL: Connector not running (state: $STATUS)\"\n  exit 2\nfi\n\n# Check task status\nTASK_STATUS=$(curl -s $CONNECT_URL/connectors/$CONNECTOR_NAME/status | jq -r '.tasks[0].state')\n\nif [ \"$TASK_STATUS\" != \"RUNNING\" ]; then\n  echo \"CRITICAL: Task not running (state: $TASK_STATUS)\"\n  exit 2\nfi\n\n# Check JMX metrics (requires jmxterm or similar)\n# Check if connected\nCONNECTED=$(echo \"get -b io.conduktor.connect.websocket:type=WebSocketConnector,name=$CONNECTOR_NAME,url=* isConnected\" | java -jar jmxterm.jar -l localhost:9999 -n)\n\nif [ \"$CONNECTED\" != \"true\" ]; then\n  echo \"WARNING: WebSocket not connected\"\n  exit 1\nfi\n\necho \"OK: Connector healthy\"\nexit 0\n</code></pre>"},{"location":"operations/RUNBOOK/#recovery-procedures","title":"Recovery Procedures","text":""},{"location":"operations/RUNBOOK/#restart-connector","title":"Restart Connector","text":"<pre><code># Pause connector\ncurl -X PUT http://localhost:8083/connectors/websocket-source/pause\n\n# Wait for current messages to flush\nsleep 10\n\n# Resume connector\ncurl -X PUT http://localhost:8083/connectors/websocket-source/resume\n\n# Verify status\ncurl -s http://localhost:8083/connectors/websocket-source/status | jq .\n</code></pre>"},{"location":"operations/RUNBOOK/#reset-offsets","title":"Reset Offsets","text":"<p>WARNING: This will cause message reprocessing or data loss depending on retention.</p> <pre><code># Delete connector\ncurl -X DELETE http://localhost:8083/connectors/websocket-source\n\n# Connector offsets are stored in Kafka Connect's offset storage\n# Manual reset requires stopping Connect, clearing offset topic, and restarting\n\n# Recreate connector with fresh configuration\ncurl -X POST http://localhost:8083/connectors \\\n  -H \"Content-Type: application/json\" \\\n  -d @connector-config.json\n</code></pre>"},{"location":"operations/RUNBOOK/#emergency-shutdown","title":"Emergency Shutdown","text":"<p>If connector is misbehaving and needs immediate shutdown:</p> <pre><code># Option 1: Pause connector (graceful)\ncurl -X PUT http://localhost:8083/connectors/websocket-source/pause\n\n# Option 2: Delete connector (removes from cluster)\ncurl -X DELETE http://localhost:8083/connectors/websocket-source\n\n# Option 3: Restart Connect worker (nuclear option)\nkubectl delete pod -l app=kafka-connect\n</code></pre>"},{"location":"operations/RUNBOOK/#contact-and-escalation","title":"Contact and Escalation","text":"<p>For issues not covered in this runbook:</p> <ol> <li>Review connector logs at DEBUG level</li> <li>Check Kafka Connect worker logs</li> <li>Verify Kafka broker health</li> <li>Consult project documentation: https://github.com/conduktor/kafka-connect-websocket</li> <li>Open issue with:</li> <li>Connector configuration</li> <li>JMX metrics snapshot</li> <li>Relevant logs (last 1000 lines)</li> <li>Kafka Connect worker version</li> <li>Kafka broker version</li> </ol>"}]}